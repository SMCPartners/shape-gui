<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../elements.html">

<dom-module id="app-history-list">
    <style>
        .pms {
            @apply(--pm-style);
        };
        .card {
            width: 60%;
        };
        .child {
            order: 0;
            flex: 0 1 auto;
            align-self: center;
        };
        .parent {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
            align-content: space-between;
            align-items: flex-start;
        };
        .parenttwo {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-content: space-between;
            align-items: flex-start;
        };
        .header {
            font-size: 36px;
        };
    </style>
    <template>
        <template is="dom-repeat" items="{{history}}">
            <paper-material class="pms">
                <div class="parenttwo">
                    <h1 class="child"><span>{{item.period}}</span>, <span>{{item.year}}</span></h1>
                </div>
                <div class="parent">
                    <div class="child">
                        <google-chart
                                type='pie'
                                options='{{item.chartGroupOptions}}'
                                data='{{item.chartGroup}}'>
                        </google-chart>
                    </div>
                    <div class="child">
                        <google-chart
                                type='pie'
                                options='{{item.chartAggOptions}}'
                                data='{{item.chartAggregate}}'>
                        </google-chart>

                    </div>

                    <!--Just added -->
                    <div class="fraction1 child">
                        <span class="fup">Numerator</span>
                        <span class="bar">/</span>
                        <span class="fdn">Denominator</span>
                    </div>
                    <div class="child header">=</div>
                    <div class="fraction2 child">
                        <span class="fup">{{item.numerator}}</span>
                        <span class="bar">/</span>
                        <span class="fdn">{{item.denominator}}</span>
                    </div>

                </div>
                <div class="parent">
                    <paper-material elevation="0" class="child resultBox">
                        <div class="resultForward">Your Measure Results:</div>
                        <div class="results">{{computePercentage(item.numerator, item.denominator)}}</div>
                    </paper-material>
                    <paper-material elevation="0" class="child resultBox">
                        <div class="resultForward">Aggregate Measure Results:</div>
                        <div class="results">{{computePercentage(item.aggregateNumerator, item.aggregateDenominator)}}</div>
                    </paper-material>
                </div>
            </paper-material>
        </template>
    </template>
</dom-module>
<script>
    (function () {
        Polymer({
            is: 'app-history-list',
            properties: {
            },
            ready: function() {
            this.history = [
                    {period: 'January - March', year: '2014', numerator: 3241, denominator: 4231, aggregateNumerator: 18893, aggregateDenominator: 23184,
                    chartGroup: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartGroupOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"},
                    chartAggregate: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartAggOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"}},

                    {period: 'April - June', year: '2014', numerator: 3241, denominator: 4231, aggregateNumerator: 18893, aggregateDenominator: 23184,
                    chartGroup: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartGroupOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"},
                    chartAggregate: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartAggOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"}},

                    {period: 'July - September', year: '2014', numerator: 3241, denominator: 4231, aggregateNumerator: 18893, aggregateDenominator: 23184,
                    chartGroup: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartGroupOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"},
                    chartAggregate: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartAggOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"}},

                    {period: 'October - December', year: '2014', numerator: 3241, denominator: 4231, aggregateNumerator: 18893, aggregateDenominator: 23184,
                    chartGroup: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartGroupOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"},
                    chartAggregate: [["Month", "Days"], ["Well Controlled", 3241], ["Poorly Controlled", 990]],
                    chartAggOptions: {"title": "Controlling High Blood Pressure", "pieHole": ".6", "pieSliceText": "none"}}
                ];
            },
            computePercentage: function (numerator, denominator) {
                    var ratio = 100 * numerator / denominator;
                    var percent = Math.round(ratio * 10)/10
                    return percent + '%';
            },
        });
    })();

</script>

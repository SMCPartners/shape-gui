<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../elements.html">


<dom-module id="app-history-demographics">
    <style>


    </style>
    <template>
      <shape-iron-ajax-helper
        id="showAppHistoryDemographics"
        handle-as="json"
        method="GET"
        on-response="appHistDemograhicCallBack"
        debounce-duration="300">
      </shape-iron-ajax-helper>
      <template is='dom-repeat' items='{{orgMeasCharts}}' filter="{{_filter(filterVal)}}">


        <paper-material>
          <h2>NQF ID: <span>{{item.measureNQF}}</span><br><span>{{item.measureName}}</span></h2>
          <br>
          <h3>Reported:<span>{{item.reportQuart}}</span>of<span>{{item.reportYear}}</span></h3>
                    <h2>Race</h2>
                      <!--template is="dom-if" if="{{item.raceData}}"-->
                      <google-chart
                        cols='[{"label": "Data", "type": "string"},{"label": "Value", "type": "number"}]'
                        rows='{{item.raceData}}'>
                      </google-chart>
                    </template>

                    <!-- <h2>Age</h2>
                    <google-chart
                      type='column'
                      data='{{item.ageData}}'>
                    </google-chart>
                    <h2>Ethnicity</h2>
                    <google-chart
                      type='column'
                      data='{{item.ethniData}}'>
                    </google-chart>
                    <h2>Gender</h2>
                    <google-chart
                      type='column'
                      data='{{item.genderData}}'>
                    </google-chart> -->
        </paper-material>

                    <!-- <google-chart
                        type='column'
                        options='{"title": "Inventory"}'
                        data='[
                              [ ["Year", "Things", "Stuff"],
                               ["2004", 1000, 400],
                               ["2005", 1170, 460],
                               ["2006", 660, 1120],
                               ["2007", 1030, 540] ]'>
                    </google-chart> -->
     </template>

    </template>
</dom-module>
<script>
    (function () {
        Polymer({
            is: 'app-history-demographics',
            properties: {
              filterVal: "defaultFilter"
            },
            ready: function() {
            },
            appHistDemograhicCallBack: function(evt){
              this.set("orgMeasCharts", evt.detail.response)
              // console.log('app hist demographics: ')
              // console.log(response)
            },
            setAjax: function(orgId, measureId, year){
              this.$.showAppHistoryDemographics.resource="/common/show/appHistDemographic/"+orgId+"/"+measureId+"/"+year;
              this.$.showAppHistoryDemographics.generateRequest();
            }
            // _filter: function(val) {
            //     return function(orgMeasCharts) {
            //         // if (!val) return true;
            //         // if (!orgMeasCharts) return false;
            //         // return(orgMeasCharts.reportYear && ~orgMeasCharts.reportYear.indexOf(val));
            //         console.log(orgMeasCharts.reportYear === app.$.mainPage.$.dashboard.$.history.$.yearSelect.value && orgMeasCharts.measureNQF === app.$.mainPage.$.dashboard.$.history.$.measureSelect.value);
            //         return (orgMeasCharts.reportYear === app.$.mainPage.$.dashboard.$.history.$.yearSelect.value && orgMeasCharts.measureNQF === app.$.mainPage.$.dashboard.$.history.$.measureSelect.value)
            //         // return true;
            //    };
            //  }
        });
    })();


</script>

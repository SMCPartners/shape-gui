<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../elements.html">




<dom-module id="app-measure-input">
    <style>
        .pms {
            @apply(--pm-style)
        };
        .child {
            order: 0;
            flex: 0 1 auto;
            align-self: center;
        };
        .parent {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
            align-content: space-between;
            align-items: flex-start;
        };
        .parenttwo {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-content: space-between;
            align-items: flex-start;
        };
        .fraction {
            display: inline-block;
            position: relative;
            vertical-align: middle;
            letter-spacing: 0.001em;
            text-align: center;
            font-size: 36px;
        };
        .fraction > span {
            display: block;
            padding: 0.1em;
        };
        .fraction span.fdn {
            border-top: thin solid black;
        };
        .fraction span.bar {
            display: none;
        };
        .header {
            font-size: 36px;
        };
        .modalHeader {
            align: center;
        };
        .modalSection {
            font-size: 20px;
        };
        .leader {
            border-color: black;
        };
        .double {
            flex: 2 2;
        };
        .single {
            flex: 1 1;
        };
        .modalBox {
        position: fixed;
        width: 70%;
        height: 70%;
        top: 0;
        right: 0;
        bottom: auto;
        left: 0;
        margin: 0px !important;
        };
    </style>
    <template>

            <paper-material class="pms">
                <div class="parent">
                    <div class="child header">NQF 0018â€‹</div>
                    <div class="child header">Controlling High Blood Pressure</div>
                    <div class="child">
                        <paper-icon-button icon="info" on-tap="measureDetail"></paper-icon-button>
                    </div>
                </div>
                <div class="parent">
                    <div class="fraction child">
                        <span class="fup">Numerator</span>
                        <span class="bar">/</span>
                        <span class="fdn">Denominator</span>
                    </div>
                    <div class="child header">=</div>
                    <div class="fraction child">
                        <span class="fup">51</span>
                        <span class="bar">/</span>
                        <span class="fdn">100</span>
                    </div>
                    <div class="child">
                        <google-chart id="bpChart"
                                type='pie'
                                options='{"title": "Poorly Controlled HbA1c",
                                           "pieHole": ".6",
                                           "pieSliceText": "none"}'
                                data='{{bloodpressure}}'>
                            <!--"diff": "innerCircle":{"radiusFactor": ".6"}-->
                        </google-chart>
                    </div>
                    <div class="child">
                        <paper-button raised on-tap="editMeasure" id="b1">Edit</paper-button>
                    </div>
                </div>
            </paper-material>


            <paper-material class="pms">
                <div class="parent">
                    <div class="child header">NQF 0059</div>
                    <div class="child header">Diabetes: HbA1c Poor Control</div>
                    <div class="child">
                        <paper-icon-button icon="info" on-tap="measureDetail"></paper-icon-button>
                    </div>
                </div>
                <div class="parent">
                    <div class="fraction child">
                        <span class="fup">Numerator</span>
                        <span class="bar">/</span>
                        <span class="fdn">Denominator</span>
                    </div>
                    <div class="child header">=</div>
                    <div class="fraction child">
                        <span class="fup">63</span>
                        <span class="bar">/</span>
                        <span class="fdn">100</span>
                    </div>
                    <div class="child">

                        <google-chart
                                type='pie'
                                options='{"title": "Poorly Controlled HbA1c",
                                           "pieSliceText": "none",
                                           "pieHole": ".6"}'
                                data='{{diabetes}}'>
                        </google-chart>
                    </div>
                    <div class="child">
                        <paper-button raised on-tap="editMeasure">Edit</paper-button>
                    </div>
                </div>
            </paper-material>

    </template>
</dom-module>
<script>
    (function () {
        Polymer({
            is: 'app-measure-input',
            properties: {
                currentMeasure: String,
                oldData: Object,
                newData: Object,
                diffData: Object

                /*stratify: {
                    gender1: "Male",
                    gender2: "Female",
                    race1: "African American/Black",
                    race2: "American Indian or Alaska Native",
                    race3: "Asian",
                    race4: "Native Hawaiian or Pacific Islander",
                    race5: "White",
                    race6: "Other",
                    ethnicity1: "Hispanic/Latino",
                    ethnicity2: "Not Hispanic/Latino",
                    age1: "18-44 Years",
                    age2: "45-64 Years",
                    age3: "65-85 Years"
                };*/
            },
            ready: function() {
                this.diabetes=[["Month", "Days"], ["Poorly Controlled", 63], ["Well Controlled", 37]];
                //this.diffData=.computeDiff(oldData, newData);
                //console.log(diffData);
                this.oldData=[["Month", "Days"], ["Well Controlled", 51], ["Poorly Controlled", 49]];
                this.newData=[["Month", "Days"], ["Well Controlled", 60], ["Poorly Controlled", 40]];
                this.bloodpressure=[["Month", "Days"], ["Well Controlled", 51], ["Poorly Controlled", 49]];
            },
            attached: function() {

            },
            editMeasure: function (e) {
                console.log(testDlg)
                console.log(testDemIn)
                testDemIn.open();
                var nMeasure = e.currentTarget.id;
                console.log(nMeasure);
            },
            /*buildStratify: function (e) {

                console.log(stratify);
            for (i = 0; i < stratify.length; i++)
                {
                    document.write("<h1>Hello</h1>")
                    "<div class='parent'>
                        <div class='child modalSection double'>'stratify.i'</div>
                        <div class='child single'>
                            <paper-input label='Numerator'></paper-input>
                        </div>
                        <div class='child single'>
                            <paper-input label='Denominator'></paper-input>
                        </div>
                    </div>"
                }
                console.log("I'm calling the function")
            }*/
            measureDetail: function (e) {
                this.$.info.toggle();
                console.log("It worked for Info!");
            }

        });
    })();
</script>